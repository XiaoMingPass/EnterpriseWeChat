<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="DepartmentXML" >
    <resultMap id="DepartmentMap" type="department" >
        <id column="id" property="id" jdbcType="VARCHAR" />
        
        
        <result column="pid" property="pid" jdbcType="VARCHAR" />
        
        <result column="company_id" property="companyId" jdbcType="VARCHAR" />
        
        <result column="code" property="code" jdbcType="VARCHAR" />
        
        <result column="pcode" property="pcode" jdbcType="VARCHAR" />
        
        <result column="name" property="name" jdbcType="VARCHAR" />
        
        <result column="order_no" property="orderNo" jdbcType="VARCHAR" />
        
        <result column="del_flag" property="delFlag" jdbcType="INTEGER" />
        
        <result column="syn" property="syn" jdbcType="INTEGER" />
        
        <result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
        
        <result column="update_time" property="updateTime" jdbcType="TIMESTAMP" />
    </resultMap>
    
    <sql id="Base_Column_List" >
        id,
        pid,
        company_id,
        code,
        pcode,
        name,
        order_no,
        del_flag,
        syn,
        create_time,
        update_time
    </sql>
    
    <sql id="where">
        <if test="id != null and id != ''">
        and id = #{id,jdbcType=VARCHAR}
        </if>
        <if test="pid != null and pid != ''">
        and pid = #{pid,jdbcType=VARCHAR}
        </if>
        <if test="companyId != null and companyId != ''">
        and company_id = #{companyId,jdbcType=VARCHAR}
        </if>
        <if test="code != null and code != ''">
        and code = #{code,jdbcType=VARCHAR}
        </if>
        <if test="pcode != null and pcode != ''">
        and pcode = #{pcode,jdbcType=VARCHAR}
        </if>
        <if test="name != null and name != ''">
        and name = #{name,jdbcType=VARCHAR}
        </if>
        <if test="orderNo != null and orderNo != ''">
        and order_no = #{orderNo,jdbcType=VARCHAR}
        </if>
        <if test="delFlag != null">
        and del_flag = #{delFlag,jdbcType=INTEGER}
        </if>
        <if test="syn != null">
        and syn = #{syn,jdbcType=INTEGER}
        </if>
        <if test="createTime != null and createTime != ''">
        and create_time = #{createTime,jdbcType=TIMESTAMP}
        </if>
        <if test="updateTime != null and updateTime != ''">
        and update_time = #{updateTime,jdbcType=TIMESTAMP}
        </if>
		<!--
		<if test="startTime!=null and startTime!=''">
        and create_time <![CDATA[>=]]> #{startTime,jdbcType=VARCHAR}
        </if>
        <if test="endTime!=null and endTime!=''">
        and create_time <![CDATA[<=]]> #{endTime,jdbcType=VARCHAR}
        </if>
		 -->
    </sql>
    
    <select id="getDepartmentById" resultMap="DepartmentMap" parameterType="java.lang.String" >
        select 
        <include refid="Base_Column_List" />
        from tbl_wx_department
        where id = #{id,jdbcType=VARCHAR}
    </select>
    
    <select id="getDepartmentByIds" resultMap="DepartmentMap" parameterType="java.lang.String" >
        select 
        <include refid="Base_Column_List" />
        from tbl_wx_department
        where id in(${ids}) 
    </select>
    
    <select id="getDepartmentByIdsList" resultMap="DepartmentMap" parameterType="java.util.List" >
        select 
        <include refid="Base_Column_List" />
        from tbl_wx_department
        where id in
        <foreach collection="list" item="item" index="index" open="(" separator="," close=")" >  
	        #{item}
	    </foreach>
    </select>
    
    <select id="getAll" parameterType="department" resultMap="DepartmentMap">
        select <include refid="Base_Column_List"/> from tbl_wx_department where 1=1 
        <include refid="where" />
    </select>
    
    <select id="getPagerModelByQuery" parameterType="department" resultMap="DepartmentMap">
        select <include refid="Base_Column_List"/> from tbl_wx_department where 1=1 
        <include refid="where" />
		order by create_time desc
    </select>
    
    <select id="getByPageCount" parameterType="department" resultType="int">
        select count(1) from tbl_wx_department where 1=1 
        <include refid="where" />
    </select>
   
    <insert id="insertDepartment" parameterType="department" >
        insert into tbl_wx_department (<include refid="Base_Column_List" />)
        values (
        #{id,jdbcType=VARCHAR},
        #{pid,jdbcType=VARCHAR},
        #{companyId,jdbcType=VARCHAR},
        #{code,jdbcType=VARCHAR},
        #{pcode,jdbcType=VARCHAR},
        #{name,jdbcType=VARCHAR},
        #{orderNo,jdbcType=VARCHAR},
        #{delFlag,jdbcType=INTEGER},
        #{syn,jdbcType=INTEGER},
        #{createTime,jdbcType=TIMESTAMP},
        #{updateTime,jdbcType=TIMESTAMP}
        )
    </insert>
    
    <insert id="insertDepartmentBatch" parameterType="java.util.List">
        insert into tbl_wx_department (<include refid="Base_Column_List" />)
        values 
        <foreach collection="list" item="item" index="index" separator="," >  
	        (
	        #{item.id,jdbcType=VARCHAR},
	        #{item.pid,jdbcType=VARCHAR},
	        #{item.companyId,jdbcType=VARCHAR},
	        #{item.code,jdbcType=VARCHAR},
	        #{item.pcode,jdbcType=VARCHAR},
	        #{item.name,jdbcType=VARCHAR},
	        #{item.orderNo,jdbcType=VARCHAR},
	        #{item.delFlag,jdbcType=INTEGER},
	        #{item.syn,jdbcType=INTEGER},
	        #{item.createTime,jdbcType=TIMESTAMP},
	        #{item.updateTime,jdbcType=TIMESTAMP}
	        )
        </foreach>
    </insert>
    
    <delete id="delDepartmentById" parameterType="java.lang.String" >
        delete from tbl_wx_department
        where id = #{id,jdbcType=VARCHAR}
    </delete>
    
    <delete id="delDepartmentByIds" parameterType="java.lang.String" >
        delete from tbl_wx_department
        where id in(${ids}) 
    </delete>
    
    <delete id="delDepartmentByIdsList" parameterType="java.util.List" >
        delete from tbl_wx_department
        where id in
        <foreach collection="list" item="item" index="index" open="(" separator="," close=")" >  
	        #{item}
	    </foreach>
    </delete>
    
    <update id="updateDepartment" parameterType="department" >
        update tbl_wx_department
        <set>
            <if test="id != null" >
                id = #{id,jdbcType=VARCHAR},
            </if>
            <if test="pid != null" >
                pid = #{pid,jdbcType=VARCHAR},
            </if>
            <if test="companyId != null" >
                company_id = #{companyId,jdbcType=VARCHAR},
            </if>
            <if test="code != null" >
                code = #{code,jdbcType=VARCHAR},
            </if>
            <if test="pcode != null" >
                pcode = #{pcode,jdbcType=VARCHAR},
            </if>
            <if test="name != null" >
                name = #{name,jdbcType=VARCHAR},
            </if>
            <if test="orderNo != null" >
                order_no = #{orderNo,jdbcType=VARCHAR},
            </if>
            <if test="delFlag != null" >
                del_flag = #{delFlag,jdbcType=INTEGER},
            </if>
            <if test="syn != null" >
                syn = #{syn,jdbcType=INTEGER},
            </if>
            <if test="createTime != null" >
                create_time = #{createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="updateTime != null" >
                update_time = #{updateTime,jdbcType=TIMESTAMP}
            </if>
        </set>
        where id = #{id,jdbcType=VARCHAR}
    </update>
    
    <update id="updateDepartmentByIds" parameterType="java.util.Map">
        update tbl_wx_department
        <set>
            <if test="department.id != null" >
                id = #{department.id,jdbcType=VARCHAR},
            </if>
            <if test="department.pid != null" >
                pid = #{department.pid,jdbcType=VARCHAR},
            </if>
            <if test="department.companyId != null" >
                company_id = #{department.companyId,jdbcType=VARCHAR},
            </if>
            <if test="department.code != null" >
                code = #{department.code,jdbcType=VARCHAR},
            </if>
            <if test="department.pcode != null" >
                pcode = #{department.pcode,jdbcType=VARCHAR},
            </if>
            <if test="department.name != null" >
                name = #{department.name,jdbcType=VARCHAR},
            </if>
            <if test="department.orderNo != null" >
                order_no = #{department.orderNo,jdbcType=VARCHAR},
            </if>
            <if test="department.delFlag != null" >
                del_flag = #{department.delFlag,jdbcType=INTEGER},
            </if>
            <if test="department.syn != null" >
                syn = #{department.syn,jdbcType=INTEGER},
            </if>
            <if test="department.createTime != null" >
                create_time = #{department.createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="department.updateTime != null" >
                update_time = #{department.updateTime,jdbcType=TIMESTAMP}
            </if>
        </set>
        where id in(${ids}) 
    </update>
    
    <update id="updateDepartmentByIdsList" parameterType="java.util.Map">
        update tbl_wx_department
        <set>
            <if test="department.id != null" >
                id = #{department.id,jdbcType=VARCHAR},
            </if>
            <if test="department.pid != null" >
                pid = #{department.pid,jdbcType=VARCHAR},
            </if>
            <if test="department.companyId != null" >
                company_id = #{department.companyId,jdbcType=VARCHAR},
            </if>
            <if test="department.code != null" >
                code = #{department.code,jdbcType=VARCHAR},
            </if>
            <if test="department.pcode != null" >
                pcode = #{department.pcode,jdbcType=VARCHAR},
            </if>
            <if test="department.name != null" >
                name = #{department.name,jdbcType=VARCHAR},
            </if>
            <if test="department.orderNo != null" >
                order_no = #{department.orderNo,jdbcType=VARCHAR},
            </if>
            <if test="department.delFlag != null" >
                del_flag = #{department.delFlag,jdbcType=INTEGER},
            </if>
            <if test="department.syn != null" >
                syn = #{department.syn,jdbcType=INTEGER},
            </if>
            <if test="department.createTime != null" >
                create_time = #{department.createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="department.updateTime != null" >
                update_time = #{department.updateTime,jdbcType=TIMESTAMP}
            </if>
        </set>
        where id in
        <foreach collection="ids" item="item" index="index" open="(" separator="," close=")" >  
	        #{item}
	    </foreach>
    </update>
    
    <update id="updateDepartmentList" parameterType="java.util.List">
    	<foreach collection="list" item="item" index="index" open="" close=";" separator=";">
		        update tbl_wx_department
		        <set>
		            <if test="item.id != null" >
		                id = #{item.id,jdbcType=VARCHAR},
		            </if>
		            <if test="item.pid != null" >
		                pid = #{item.pid,jdbcType=VARCHAR},
		            </if>
		            <if test="item.companyId != null" >
		                company_id = #{item.companyId,jdbcType=VARCHAR},
		            </if>
		            <if test="item.code != null" >
		                code = #{item.code,jdbcType=VARCHAR},
		            </if>
		            <if test="item.pcode != null" >
		                pcode = #{item.pcode,jdbcType=VARCHAR},
		            </if>
		            <if test="item.name != null" >
		                name = #{item.name,jdbcType=VARCHAR},
		            </if>
		            <if test="item.orderNo != null" >
		                order_no = #{item.orderNo,jdbcType=VARCHAR},
		            </if>
		            <if test="item.delFlag != null" >
		                del_flag = #{item.delFlag,jdbcType=INTEGER},
		            </if>
		            <if test="item.syn != null" >
		                syn = #{item.syn,jdbcType=INTEGER},
		            </if>
		            <if test="item.createTime != null" >
		                create_time = #{item.createTime,jdbcType=TIMESTAMP},
		            </if>
		            <if test="item.updateTime != null" >
		                update_time = #{item.updateTime,jdbcType=TIMESTAMP}
		            </if>
		        </set>
		        where id = #{item.id,jdbcType=VARCHAR}
	     </foreach>
    </update>
    
 <insert id="insertDeptReplaceBatch" parameterType="java.util.List">
        insert into tbl_wx_department (<include refid="Base_Column_List" />)
        values 
        <foreach collection="list" item="item" index="index" separator="," >  
	        (
	        #{item.id,jdbcType=VARCHAR},
	        #{item.pid,jdbcType=VARCHAR},
	        #{item.companyId,jdbcType=VARCHAR},
	        #{item.code,jdbcType=VARCHAR},
	        #{item.pcode,jdbcType=VARCHAR},
	        #{item.name,jdbcType=VARCHAR},
	        #{item.orderNo,jdbcType=VARCHAR},
	        #{item.delFlag,jdbcType=INTEGER},
	        #{item.syn,jdbcType=INTEGER},
	        #{item.createTime,jdbcType=TIMESTAMP},
	        #{item.updateTime,jdbcType=TIMESTAMP}
	        )
        </foreach>
        ON DUPLICATE KEY UPDATE 
            pid = VALUES(pid),
            company_id = VALUES(company_id),
            code = VALUES(code),
            pcode = VALUES(pcode),
            name = VALUES(name),
            order_no = VALUES(order_no),
            del_flag = VALUES(del_flag),
            syn = VALUES(syn),
            create_time = VALUES(create_time),
            update_time = VALUES(update_time)
    </insert>
    
</mapper>